function axc = JPSTDefaultOptions(action);
global alignIDRange;
global spikeIDRange;
global binRange;
global startstopRange;
global ticksperms;
global oldAlign;
global oldXID;
global oldYID;

switch (action)
   
case('open')
out = 0;   
load JPSTDefaultOptions;

h0 = figure('Color',[0.8 0.8 0.8], ...
	'Name','JPST - default options', ...
   'NumberTitle','off', ...
   'Interruptible','off',...
   'MenuBar','none',...
	'Position',[451 201 208 333], ...
	'Tag','Fig1');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[14.25 210.75 130.5 12], ...
	'String',' spike ID range (inclusive)', ...
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'ListboxTop',0, ...
	'Position',[15 226.5 131.25 12], ...
	'String','gdf information', ...
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'HorizontalAlignment','right', ...
	'ListboxTop',0, ...
	'Position',[16.5 198.75 45 13.5], ...
	'String',int2str(spikeIDRange(1)), ...
	'Style','edit', ...
	'Tag','defSpikeIDmin');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'HorizontalAlignment','right', ...
	'ListboxTop',0, ...
	'Position',[99.75 200.25 45 13.5], ...
	'String',int2str(spikeIDRange(2)), ...
	'Style','edit', ...
	'Tag','defSpikeIDmax');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'ListboxTop',0, ...
	'Position',[70.5 199.5 20.25 13.5], ...
	'String','to', ...
	'Style','text', ...
	'Tag','StaticText2');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'ListboxTop',0, ...
	'Position',[68.25 166.5 20.25 13.5], ...
	'String','to', ...
	'Style','text', ...
	'Tag','StaticText2');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'HorizontalAlignment','right', ...
	'ListboxTop',0, ...
	'Position',[97.5 168 45 13.5], ...
	'String',int2str(alignIDRange(2)), ...
	'Style','edit', ...
	'Tag','defAlignIDmax');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'HorizontalAlignment','right', ...
	'ListboxTop',0, ...
	'Position',[15 166.5 45 13.5], ...
	'String',int2str(alignIDRange(1)), ...
	'Style','edit', ...
	'Tag','defAlignIDmin');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[13.5 179.25 130.5 12], ...
	'String',' align ID range (inclusive)', ...
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[12 146.25 130.5 12], ...
	'String',' gdf ticks per millisecond', ...
	'Style','text', ...
	'Tag','s');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'HorizontalAlignment','right', ...
	'ListboxTop',0, ...
	'Position',[13.5 133.5 45 13.5], ...
	'String',int2str(ticksperms), ...
	'Style','edit', ...
	'Tag','defticksperms');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[11.25 91.5 130.5 12], ...
	'String',' maximum PSTH range (in ms)', ...
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'ListboxTop',0, ...
	'Position',[11.25 107.25 131.25 12], ...
	'String','timing information', ...
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'HorizontalAlignment','right', ...
	'ListboxTop',0, ...
	'Position',[14.25 79.5 45 13.5], ...
	'String',int2str(startstopRange(1)), ...
	'Style','edit', ...
	'Tag','defStartminms');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'HorizontalAlignment','right', ...
	'ListboxTop',0, ...
	'Position',[97.5 81 45 13.5], ...
	'String',int2str(startstopRange(2)), ...
	'Style','edit', ...
	'Tag','defStopmaxms');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'ListboxTop',0, ...
	'Position',[67.5 80.25 20.25 13.5], ...
	'String','to', ...
	'Style','text', ...
   'Tag','StaticText2');
s = [];
for i = 1:length(binRange)
   s = [s '  ' num2str(binRange(i))];
end   
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[14.25 47.25 128.25 13.5], ...
	'String',s, ...
	'Style','edit', ...
	'Tag','defBinWidths');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[12.75 60 130.5 12], ...
	'String',' allowable bin widths (in ms)', ...
	'Style','text', ...
	'Tag','d');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'Callback','JPSTDefaultOptions save', ...
	'ListboxTop',0, ...
	'Position',[13.5 11.25 55.5 15.75], ...
	'String','save', ...
	'Tag','SaveDefaults');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'Callback','close', ...
	'ListboxTop',0, ...
	'Position',[87 10.5 55.5 15.75], ...
	'String','cancel', ...
	'Tag','CancelDefaults');

if nargout > 0, out = 1; end


case('save')
out = 0;
cf = findobj('tag','defSpikeIDmin');
s = get(cf,'String');
spikeIDRange(1) = str2num(s);
cf = findobj('tag','defSpikeIDmax');
s = get(cf,'String');
spikeIDRange(2) = str2num(s);
cf = findobj('tag','defAlignIDmin');
s = get(cf,'String');
alignIDRange(1) = str2num(s);
cf = findobj('tag','defAlignIDmax');
s = get(cf,'String');
alignIDRange(2) = str2num(s);
cf = findobj('tag','defticksperms');
s = get(cf,'String');
ticksperms = str2num(s);
cf = findobj('tag','defStartminms');
s = get(cf,'String');
startstopRange(1) = str2num(s);
cf = findobj('tag','defStopmaxms');
s = get(cf,'String');
startstopRange(2) = str2num(s);
cf = findobj('tag','defBinWidths');
s = get(cf,'String');
binRange = eval(['[' s ']']);

% setup (new) menus
status(1) = JPSTGUI('setAlignMenuList',oldAlign);
status(2) = JPSTGUI('setSpikeMenuList',[oldXID oldYID]);
status(3) = JPSTGUI('setBinMenuList',1);
% make sure start time and stop time values are still valid
JPSTGUI('UpDateStart');   
JPSTGUI('UpDateStop');
JPSTGUI('setBinWidth');

if sum(status) == 3
  save JPSTDefaultOptions.mat alignIDRange spikeIDRange binRange startstopRange ticksperms
  close
  out = 1;
else
   if ~status(1)
      fprintf('No valid align codes\n');
   end   
   if ~status(2)
      fprintf('No valid spike codes\n');
   end   
   if ~status(3)
      fprintf('No valid bin widths\n');
   end   
   fprintf('Options not saved.\n');
   out = 0;
   JPSTGUI('busy',1);
end

end % end of main switch statement