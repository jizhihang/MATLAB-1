function exportSettings

if ~ispref('newScope', 'exportSettings')
    setpref('newScope', 'exportSettings', [3 3 1 1]);
end

settings = getpref('newScope', 'exportSettings');
    
if ~isappdata(0, 'newScopeExportSettings')
    h1 = figure('numbertitle', 'off',...
        'name', 'Export Settings',...
        'menu', 'none',...
        'color', [.8 .8 .8],...
        'position', [400 400 255 70],...
        'closeRequestFcn', @closeMe,...
        'resize', 'off');
    
    uicontrol(...
        'background', [.8 .8 .8],...
        'Parent',h1,...
        'Units','characters',...
        'HorizontalAlignment','left',...
        'Position',[2.8 3.08461538461538 14.6 1.38461538461538],...
        'String','Width (inches)',...
        'Style','text');

    uicontrol(...
        'background', [1 1 1],...
        'Parent',h1,...
        'Units','characters',...
        'Position',[17.8 3.23076923076923 7 1.69230769230769],...
        'String',num2str(settings(1)),...
        'callback', @setWidth,...
        'Style','edit');

    uicontrol(...
        'background', [.8 .8 .8],...
        'Parent',h1,...
        'Units','characters',...
        'HorizontalAlignment','left',...
        'Position',[27.6 3.00769230769231 32.4 1.46153846153846],...
        'String','Height (inches)',...
        'Style','text');

    uicontrol(...
        'background', [1 1 1],...
        'Parent',h1,...
        'Units','characters',...
        'Position',[43.2 3.23076923076923 6 1.69230769230769],...
        'String',num2str(settings(2)),...
        'callback', @setHeight,...
        'Style','edit');

    uicontrol(...
        'background', [.8 .8 .8],...
        'Parent',h1,...
        'Units','characters',...
        'Position',[5.6 0.769230769230769 20 1.30769230769231],...
        'String','Show File Path',...
        'Style','checkbox',...
        'callback', 'tempPref = getpref(''newScope'',''exportSettings''); setpref(''newScope'',''exportSettings'',[tempPref(1:2) get(gcbo, ''value'') tempPref(4)]);',...
        'Value',settings(3));

    uicontrol(...
        'background', [.8 .8 .8],...
        'Parent',h1,...
        'Units','characters',...
        'Position',[29.8 0.769230769230769 17.8 1.30769230769231],...
        'String','Show Offset',...
        'Style','checkbox',...
        'callback', 'tempPref = getpref(''newScope'',''exportSettings''); setpref(''newScope'',''exportSettings'',[tempPref(1:3) get(gcbo, ''value'')]);',...        
        'Value', settings(4));
    
    setappdata(0, 'newScopeExportSettings', h1);
else
    rootKids = get(0, 'children');
    whichMe = rootKids == getappdata(0, 'newScopeExportSettings');
    set(0, 'children', [rootKids(whichMe) rootKids(~whichMe)]);
end

    function setWidth(varargin)
        tempPref = getpref('newScope', 'exportSettings');        
        if all(ismember(get(gcbo, 'string')', {'.', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'}))
            setpref('newScope', 'exportSettings', [str2double(get(gcbo, 'string')) tempPref(2:4)]);
        else
            msgbox('Value must be a positive numeric');
            set(gcbo, 'string', num2str(tempPref(1)));
        end
    end
        
    function setHeight(varargin)
        tempPref = getpref('newScope', 'exportSettings');                
        if all(ismember(get(gcbo, 'string')', {'.', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'}))
            setpref('newScope', 'exportSettings', [tempPref(1) str2double(get(gcbo, 'string')) tempPref(3:4)]);
        else
            msgbox('Value must be a positive numeric');
            set(gcbo, 'string', num2str(tempPref(2)));
        end  
    end
    
    function closeMe(varargin)
        rmappdata(0, 'newScopeExportSettings');
        delete(varargin{1})
    end
end